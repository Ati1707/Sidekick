@page "/error/{type}"
@layout OverlayLayout

<MudPaper Class="pa-3 mb-3 d-flex flex-row align-center">
    <MudIcon Size="Size.Large" Color="Color.Error" Icon="@Icons.Filled.Error" Class="mr-3" />
    <MudText Align="Align.Center">
        @Text
    </MudText>
</MudPaper>

<div class="d-flex justify-end">
    <MudButton Variant="Variant.Filled"
               Color="Color.Primary"
               OnClick="ViewInstance.Close">
        @Resources.Close
    </MudButton>
</div>

@code {
    [Inject] private IViewInstance ViewInstance { get; set; }
    [Inject] private ErrorResources Resources { get; set; }

    [Parameter] public string Type { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await ViewInstance.Initialize(Resources.Title, width: 400, height: 260, isModal: true);
        await base.OnInitializedAsync();
    }

    private string Text => Type switch
    {
        ErrorType.InvalidItem => Resources.InvalidItemError,
        ErrorType.UnavailableTranslation => Resources.AvailableInEnglishError,
        ErrorType.Unparsable => Resources.ParserError,
        _ => Resources.Error,
    };
}
