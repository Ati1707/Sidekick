@using MudBlazor
@using Sidekick.Common.Settings
@using Sidekick.Modules.Trade.Localization
<MudTooltip Text="@(Layout == Layout.CardsMinimized ? Resources.Layout_Cards_Maximized : @Resources.Layout_Cards_Minimized)"
            Placement="Placement.Left">
    <MudIconButton Icon="@(Layout == Layout.CardsMinimized ? Icons.Material.Filled.Expand : Icons.Material.Filled.Compress)"
                   OnClick="ToggleLayout" />
</MudTooltip>

@inject ISettingsService SettingsService
@inject TradeResources Resources

@code {
    [Parameter] public Layout Layout { get; set; }
    [Parameter] public EventCallback<Layout> LayoutChanged { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
    }

    private async Task ToggleLayout()
    {
        var newLayout = Layout == Layout.CardsMinimized ? Layout.CardsMaximized : Layout.CardsMinimized;
        await SettingsService.Set(SettingKeys.PriceCheckLayout, newLayout.ToString());
        await LayoutChanged.InvokeAsync(newLayout);
    }
}
